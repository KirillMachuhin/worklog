{% extends "../base.html" %}

{% block extra_head %}
{{ modules.Static("css/smoothness/jquery-ui-1.8.6.slider.datepicker.css", "css/report.css") }}
{% end %}

{% block content_inner %}

<h1>Full report</h1>

<form action=".">

<div id="slider" style="width:500px"></div>
<p style="margin-top:10px">
<strong>From:</strong>
<input type="text" id="from_date" name="from_date" value="">
<strong>To:</strong>
<input type="text" id="to_date" name="to_date" value="">
</p>
<!--
<label for="from">From</label> 
<input type="text" id="from" name="from" value="" readonly="readonly" /> 
<label for="to">to</label> 
<input type="text" id="to" name="to" value="" readonly="readonly" />
-->
</form>

<table id="report">
  <tbody class="head">
    <tr>
      <th class="label">Days spent</th>
      <th>Days</th>
    </tr>
  </tbody>
  <tbody id="days_spent">
  </tbody>
  
  <tbody class="head">
    <tr>
      <th class="label">Hours spent</th>
      <th>Hours</th>
    </tr>
  </tbody>  
  <tbody id="hours_spent">
  </tbody>
  
</table>
<h2>TEST</h2>
{% end %}	    
{% block sidebar %}

<div id="export-options">
  <h2>Export options</h2>
  <p id="excel-export">
    <a class="download-export" href="/report/export.xls">Download as Excel file</a>
  </p>

  <p id="csv-export">
    <a class="download-export" href="/report/export.csv">Download as CSV file</a>
  </p>
  
  <!--
  <p id="pdf-export">
    <a class="download-export" href="/report/export.pdf">Download as PDF file</a>
  </p>
  -->
</div>

{% end %}	    
{% block extrajs %}
<script type="text/javascript">
var minDate = new Date({{ first_date.year }}, {{ first_date.month }}-1, {{ first_date.day }});
var maxDate = new Date({{ last_date.year }}, {{ last_date.month }}-1, {{ last_date.day }});
$(function() {
  var href = $('a.excel-export').unbind('click').click(function() {
    var start = startDate.datepicker('getDate');
    var end = endDate.datepicker('getDate');
    window.open($(this).attr('href')+'?start=' + start.getTime() + '&end=' + end.getTime());
    return false;
  });
  
});
</script>
{{ modules.Static("ext/jquery-ui-1.8.6.slider.datepicker.min.js", "report.js") }}
{% end %}
